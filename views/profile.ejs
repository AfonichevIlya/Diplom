<!DOCTYPE html>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
/>
<link rel="stylesheet" href="style.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<html>
  <head>
    <header><%- include ('./partials/header') %></header>

    <title><%= title %></title>
  </head>
  <body>
    <div
    class="container"
    style="display: flex; flex-direction: row; min-height: 700px"
  >
  <div class="container33"><%- include ('./partials/menu') %></div>

    
    <div
    class="container11"
    style="border-radius: 10%;color: #f1cc9f; background-color:  #232e30;width: 40%; margin-left: 13%; margin-right: auto; height: 100%;"
    >
    <div style="width: max-content; margin-left: auto; margin-right: auto; margin-top: 10%; " class="container22">

        <img src="/avatars/<%= user.avatar %>" onerror="this.onerror=null;this.src='img/ava.jpg';" alt="Аватар" style="width: 200px; height: 200px; border-radius: 50%; margin-bottom: 20px;"/>
        <form id="avatarForm" action="/profile/avatar" method="post" enctype="multipart/form-data">
            <input id="avatarInput" type="file" name="avatar" onchange="submitForm()" />
            <button style="margin-left: 10%;" id="a2" type="button" onclick="triggerFileInput()">Сменить аватар</button>
        </form>
        
        <hr>
        <h3> <%= user.name %></h3>
        <p> <%= user.email %></p>
    </div>
</div>
</div>

<style>
    /* Скрываем исходный input */
    #avatarInput {
        display: none;
    }
</style>
<script>
    function triggerFileInput() {
        // Триггерим клик на реальный input
        document.getElementById('avatarInput').click();
    }

    function submitForm() {
        var input = document.getElementById('avatarInput');
        if(input.files.length > 0) {
            // Файл выбран, отправляем форму
            document.getElementById('avatarForm').submit();
        }
    }
</script>
  </body>
</div>
  <footer><%- include ('./partials/footer') %></footer>
</html>
